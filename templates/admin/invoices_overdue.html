{% extends "base_dashboard.html" %}
{% block title %}â° ÃœberfÃ¤llige Rechnungen{% endblock %}

{% block content %}

<!-- ğŸ§­ Kopfbereich -->
<div style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
  <div>
    <h1 style="font-size:1.6rem;font-weight:800;margin:0 0 .25rem 0;">â° ÃœberfÃ¤llige Rechnungen</h1>
    <p style="margin:0;color:#6b7280">Alle Rechnungen, deren FÃ¤lligkeitsdatum Ã¼berschritten ist.</p>
  </div>
  <a href="/dashboard/invoices" 
     style="text-decoration:none;color:#4f46e5;font-weight:500;">â† ZurÃ¼ck zur Ãœbersicht</a>
</div>

<!-- ğŸ“Š Tabelle oder leerer Zustand -->
{% if invoices|length == 0 %}
  <div style="background:#fff;padding:1rem;border-radius:12px;margin-top:1.2rem;box-shadow:0 4px 12px rgba(0,0,0,.05);text-align:center;">
    <p style="font-size:1rem;color:#16a34a;margin:0;">âœ… Keine Ã¼berfÃ¤lligen Rechnungen ğŸ‰</p>
  </div>
{% else %}
  <div style="background:#fff;border-radius:12px;margin-top:1.5rem;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.05);">
    <table style="width:100%;border-collapse:collapse;">
      <thead style="background:#f4f6f8;">
        <tr>
          <th style="padding:.65rem .8rem;text-align:left;">#</th>
          <th style="padding:.65rem .8rem;text-align:left;">Rechnungsnummer</th>
          <th style="padding:.65rem .8rem;text-align:left;">Kunde</th>
          <th style="padding:.65rem .8rem;text-align:center;">FÃ¤llig am</th>
          <th style="padding:.65rem .8rem;text-align:right;">Betrag</th>
          <th style="padding:.65rem .8rem;text-align:center;">Status</th>
          <th style="padding:.65rem .8rem;text-align:center;">Aktionen</th>
        </tr>
      </thead>
      <tbody>
        {% for inv in invoices %}
        <tr style="border-top:1px solid #eef2f7;">
          <td style="padding:.65rem .8rem;">{{ inv.id }}</td>
          <td style="padding:.65rem .8rem;font-family:monospace;">{{ inv.invoice_number }}</td>
          <td style="padding:.65rem .8rem;">{{ inv.customer.name if inv.customer else "â€”" }}</td>
          <td style="padding:.65rem .8rem;text-align:center;color:#dc2626;font-weight:600;">
            {{ inv.due_date.strftime("%d.%m.%Y") if inv.due_date else "â€”" }}
          </td>
          <td style="padding:.65rem .8rem;text-align:right;font-family:monospace;font-weight:600;">
            {{ "%.2f"|format(inv.total_amount) }} {{ company_settings.currency_code or "â‚¬" if company_settings else "â‚¬" }}
          </td>
          <td style="padding:.65rem .8rem;text-align:center;">
            <span style="display:inline-block;padding:.25rem .6rem;border-radius:999px;font-size:.8rem;background:#fee2e2;color:#991b1b;">
              â° ÃœberfÃ¤llig
            </span>
          </td>
          <td style="padding:.55rem .8rem;text-align:center;white-space:nowrap;">
            <a href="/dashboard/invoices/pdf/{{ inv.id }}" target="_blank"
               style="background:#3b82f6;color:#fff;padding:.38rem .6rem;border-radius:8px;text-decoration:none;margin-right:.3rem;">
              ğŸ“„ PDF
            </a>
            <a href="/dashboard/invoices/edit/{{ inv.id }}"
               style="background:#6366f1;color:#fff;padding:.38rem .6rem;border-radius:8px;text-decoration:none;margin-right:.3rem;">
              âœï¸ Bearbeiten
            </a>
            <a href="/dashboard/invoices/delete/{{ inv.id }}"
               onclick="return confirm('Rechnung wirklich lÃ¶schen?');"
               style="background:#ef4444;color:#fff;padding:.38rem .6rem;border-radius:8px;text-decoration:none;">
              ğŸ—‘ LÃ¶schen
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}

{% endblock %}