{% extends "base.html" %}
{% block title %}ğŸ“„ Formulare{% endblock %}

{% block content %}
<div style="max-width:1000px;margin:0 auto;">
  <h1 style="font-size:1.6rem;font-weight:700;margin-bottom:1rem;">ğŸ“„ Formulare</h1>

  <!-- ğŸ” Suche -->
  <form method="get" action="/dashboard/forms" style="margin-bottom:1rem;display:flex;gap:.5rem;">
    <input type="text" name="q" placeholder="Formular suchen..." value="{{ q or '' }}"
      style="flex:1;padding:.6rem;border:1px solid #ccc;border-radius:6px;">
    <button type="submit" style="background:#4f46e5;color:white;padding:.6rem 1rem;border:none;border-radius:6px;">Suchen</button>
  </form>

  <!-- â• Neues Formular -->
  <form method="post" action="/dashboard/forms/create" style="margin-bottom:1.5rem;display:flex;gap:.5rem;">
    <input type="text" name="name" placeholder="Name des Formulars" required
      style="flex:1;padding:.6rem;border:1px solid #ccc;border-radius:6px;">
    <input type="text" name="description" placeholder="Beschreibung"
      style="flex:2;padding:.6rem;border:1px solid #ccc;border-radius:6px;">
    <select name="form_type" style="padding:.6rem;border:1px solid #ccc;border-radius:6px;">
      <option value="contact">Kontakt</option>
      <option value="lead">Lead</option>
      <option value="custom" selected>Benutzerdefiniert</option>
    </select>
    <button type="submit" style="background:#16a34a;color:white;padding:.6rem 1rem;border:none;border-radius:6px;">â• Erstellen</button>
  </form>

  <!-- ğŸ“‹ Tabelle -->
  <table style="width:100%;border-collapse:collapse;background:white;">
    <thead style="background:#f3f4f6;">
      <tr>
        <th style="padding:.5rem;">#</th>
        <th style="padding:.5rem;text-align:left;">Name</th>
        <th style="padding:.5rem;text-align:left;">Typ</th>
        <th style="padding:.5rem;text-align:left;">Erstellt am</th>
        <th style="padding:.5rem;">Aktionen</th>
      </tr>
    </thead>
    <tbody>
      {% if forms %}
        {% for f in forms %}
        <tr style="border-bottom:1px solid #eee;">
          <td style="padding:.5rem;">{{ f.id }}</td>
          <td style="padding:.5rem;">{{ f.name }}</td>
          <td style="padding:.5rem;">{{ f.form_type }}</td>
          <td style="padding:.5rem;">{{ f.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
          <td style="padding:.5rem;white-space:nowrap;">
            <a href="/dashboard/forms/edit/{{ f.id }}" 
               style="background:#3b82f6;color:white;padding:.3rem .6rem;border-radius:4px;text-decoration:none;">âœï¸ Bearbeiten</a>
            <form method="post" action="/dashboard/forms/delete" style="display:inline;">
              <input type="hidden" name="id" value="{{ f.id }}">
              <button type="submit" style="background:#ef4444;color:white;padding:.3rem .6rem;border:none;border-radius:4px;">ğŸ—‘ LÃ¶schen</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="5" style="text-align:center;padding:1rem;">ğŸ“­ Keine Formulare vorhanden</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- ğŸ“„ Pagination -->
  {% if total_pages > 1 %}
    <div style="margin-top:1rem;text-align:center;">
      {% if page > 1 %}
        <a href="?page={{ page - 1 }}&q={{ q }}" style="margin-right:.5rem;">â¬…ï¸ ZurÃ¼ck</a>
      {% endif %}
      Seite {{ page }} von {{ total_pages }}
      {% if page < total_pages %}
        <a href="?page={{ page + 1 }}&q={{ q }}" style="margin-left:.5rem;">Weiter â¡ï¸</a>
      {% endif %}
    </div>
  {% endif %}
</div>
{% endblock %}