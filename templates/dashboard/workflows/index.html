{% extends "base.html" %}
{% block title %}ðŸ›  Workflows â€“ Ouhud CRM{% endblock %}

{% block content %}

<style>
    /* --- PAGE WRAPPER --- */
    .wf-page {
        padding-top: 40px; /* Abstand zum Dashboard-Header */
        width: 100%;
    }

    .wf-wrapper {
        max-width: 1150px;
        margin: 0 auto;
        background: #ffffff;
        padding: 2.4rem 2.7rem;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.06);
        border: 1px solid #e2e8f0;
        animation: fadeIn .3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    /* --- HEADER --- */
    .wf-header {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        width: 100%;
        margin-bottom: 1.8rem;
    }

    .wf-title {
        font-size: 2.1rem;
        font-weight: 800;
        color: #0D2A78;
        display: flex;
        align-items: center;
        gap: .6rem;
        flex-shrink: 0;
    }

    .new-wf-btn {
        background: #0D2A78;
        color: white;
        padding: .75rem 1.4rem;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        white-space: nowrap;
        box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        transition: .25s ease;
        flex-shrink: 0;
    }

    .new-wf-btn:hover {
        background: #1E40AF;
        transform: translateY(-2px);
    }

    /* --- TABLE --- */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1.8rem;
        border-radius: 14px;
        overflow: hidden;
    }

    thead {
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
    }

    thead th {
        padding: 1rem .9rem;
        font-size: .87rem;
        font-weight: 700;
        color: #475569;
    }

    tbody tr {
        background: white;
        border-bottom: 1px solid #f1f5f9;
        transition: background .2s ease;
    }

    tbody tr:hover {
        background: #f9fafb;
    }

    td {
        padding: 1rem .9rem;
        color: #334155;
        font-size: .97rem;
    }

    /* BADGES */
    .badge-active {
        background: #dcfce7;
        padding: .32rem .7rem;
        color: #15803d;
        border-radius: 7px;
        font-size: .82rem;
        font-weight: 700;
    }

    .badge-inactive {
        background: #f1f5f9;
        padding: .32rem .7rem;
        color: #64748b;
        border-radius: 7px;
        font-size: .82rem;
        font-weight: 700;
    }

    /* EDIT LINK */
    .edit-link {
        color: #0D2A78;
        font-weight: 700;
        text-decoration: none;
        transition: .25s ease;
    }

    .edit-link:hover {
        text-decoration: underline;
        color: #1E40AF;
    }
</style>


<div class="wf-page">
    <div class="wf-wrapper">

        <!-- HEADER (immer perfekt rechts/links ausgerichtet) -->
        <div class="wf-header">
            <div class="wf-title">ðŸ›  Workflows</div>
            <a href="/dashboard/workflows/new" class="new-wf-btn">+ Neuer Workflow</a>
        </div>

        {% if workflows|length == 0 %}
            <div class="p-6 bg-gray-50 border border-gray-200 rounded-xl text-center text-gray-600 text-lg">
                Noch keine Workflows vorhanden.<br>
                Erstelle deinen ersten Workflow Ã¼ber den Button oben rechts. ðŸš€
            </div>
        {% else %}
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Letzte Ã„nderung</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
            {% for w in workflows %}
                <tr>
                    <td class="font-semibold">{{ w.name }}</td>

                    <td>
                        {% if w.active %}
                            <span class="badge-active">Aktiv</span>
                        {% else %}
                            <span class="badge-inactive">Inaktiv</span>
                        {% endif %}
                    </td>

                    <td>{{ w.updated_at.strftime('%d.%m.%Y %H:%M') if w.updated_at else '-' }}</td>

                    <td class="text-right">
                        <a href="/dashboard/workflows/{{ w.id }}/edit" class="edit-link">
                            Bearbeiten â†’
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}

    </div>
</div>

{% endblock %}